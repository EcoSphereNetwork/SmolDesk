"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[1273],{628:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>r,metadata:()=>o,toc:()=>a});const o=JSON.parse('{"id":"docs/testing/storybook","title":"Storybook Guide","description":"","source":"@site/docs/testing/storybook.md","sourceDirName":"docs/testing","slug":"/docs/testing/storybook","permalink":"/SmolDesk/en/docs/testing/storybook","draft":false,"unlisted":false,"editUrl":"https://github.com/EcoSphereNetwork/SmolDesk/edit/main/docs/docs/testing/storybook.md","tags":[],"version":"current","frontMatter":{"title":"Storybook Guide","description":""}}');var t=n(4848),i=n(8453);const r={title:"Storybook Guide",description:""},c="Storybook Guide",d={},a=[{value:"Running Storybook",id:"running-storybook",level:2},{value:"Building Static Storybook",id:"building-static-storybook",level:2},{value:"Snapshot and Interaction Tests",id:"snapshot-and-interaction-tests",level:2},{value:"Accessibility Checks",id:"accessibility-checks",level:2},{value:"Komponenten vollst\xe4ndig abdecken",id:"komponenten-vollst\xe4ndig-abdecken",level:2},{value:"Visual Regression with Screenshot Snapshots",id:"visual-regression-with-screenshot-snapshots",level:2},{value:"\\ud83d\\udce4 Storybook Deployment",id:"ud83dudce4-storybook-deployment",level:2},{value:"Fehlerbehandlung GitHub Pages",id:"fehlerbehandlung-github-pages",level:3},{value:"Fallback-Vorschau \xfcber CI-Artefakt",id:"fallback-vorschau-\xfcber-ci-artefakt",level:3},{value:"Versionsanzeige im Docs-Tab",id:"versionsanzeige-im-docs-tab",level:3}];function l(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"storybook-guide",children:"Storybook Guide"})}),"\n",(0,t.jsx)(s.p,{children:"This project uses Storybook with the Vite builder to document React components."}),"\n",(0,t.jsx)(s.h2,{id:"running-storybook",children:"Running Storybook"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"npm run storybook\n"})}),"\n",(0,t.jsx)(s.h2,{id:"building-static-storybook",children:"Building Static Storybook"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"npm run build-storybook\n"})}),"\n",(0,t.jsx)(s.h2,{id:"snapshot-and-interaction-tests",children:"Snapshot and Interaction Tests"}),"\n",(0,t.jsxs)(s.p,{children:["Storybook stories can be tested with the ",(0,t.jsx)(s.code,{children:"@storybook/test-runner"}),". Unit tests\ncompose stories and assert on the rendered output:"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-ts",children:"import { composeStory } from '@storybook/testing-react';\nimport * as stories from '../../src/components/Button.stories';\n\nconst Primary = composeStory(stories.Primary, stories.default);\n"})}),"\n",(0,t.jsx)(s.h2,{id:"accessibility-checks",children:"Accessibility Checks"}),"\n",(0,t.jsxs)(s.p,{children:["Use ",(0,t.jsx)(s.code,{children:"jest-axe"})," to ensure each component has no accessibility violations:"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-ts",children:"import { axe, toHaveNoViolations } from 'jest-axe';\n"})}),"\n",(0,t.jsx)(s.h2,{id:"komponenten-vollst\xe4ndig-abdecken",children:"Komponenten vollst\xe4ndig abdecken"}),"\n",(0,t.jsxs)(s.p,{children:["Every component under ",(0,t.jsx)(s.code,{children:"src/components/"})," should ship with a Storybook story\nand matching snapshot plus accessibility tests. The table in\n",(0,t.jsx)(s.a,{href:"/SmolDesk/en/docs/components/storybook-status",children:"storybook-status.md"})," tracks coverage."]}),"\n",(0,t.jsx)(s.p,{children:"Validate the setup:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"bash scripts/validate-storybook.sh\n"})}),"\n",(0,t.jsx)(s.h2,{id:"visual-regression-with-screenshot-snapshots",children:"Visual Regression with Screenshot Snapshots"}),"\n",(0,t.jsx)(s.p,{children:"Run automated screenshot tests for every Storybook story:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"npm run test:storybook:snapshots\n"})}),"\n",(0,t.jsxs)(s.p,{children:["Screenshots are saved to ",(0,t.jsx)(s.code,{children:"storybook-snapshots/"})," and uploaded as CI artifacts."]}),"\n",(0,t.jsx)(s.h2,{id:"ud83dudce4-storybook-deployment",children:"\\ud83d\\udce4 Storybook Deployment"}),"\n",(0,t.jsxs)(s.p,{children:["A GitHub Actions workflow builds the static Storybook and publishes it to the\n",(0,t.jsx)(s.code,{children:"gh-pages"})," branch whenever changes land on ",(0,t.jsx)(s.code,{children:"main"}),". Ensure the repository settings point GitHub Pages to this branch. After each merge you can open\n",(0,t.jsx)(s.code,{children:"https://<user>.github.io/<repo>/"})," to preview all components and verify that the\nlatest build is available. During CI a zipped ",(0,t.jsx)(s.code,{children:"storybook-static"})," folder is uploaded as an artifact for manual inspection."]}),"\n",(0,t.jsxs)(s.p,{children:["The workflow writes a ",(0,t.jsx)(s.code,{children:".nojekyll"})," file so GitHub serves all assets correctly."]}),"\n",(0,t.jsx)(s.h3,{id:"fehlerbehandlung-github-pages",children:"Fehlerbehandlung GitHub Pages"}),"\n",(0,t.jsxs)(s.p,{children:["Sollte der unter ",(0,t.jsx)(s.code,{children:"https://ecospherenetwork.github.io/SmolDesk/"})," gehostete Storybook-Build einen 404-Fehler liefern, \xfcberpr\xfcfe zuerst, ob der ",(0,t.jsx)(s.code,{children:"gh-pages"}),"-Branch korrekt erzeugt wurde und ob die ",(0,t.jsx)(s.code,{children:"publish_dir"})," im Workflow auf ",(0,t.jsx)(s.code,{children:"storybook-static"})," zeigt. Pr\xfcfe au\xdferdem den ",(0,t.jsx)(s.code,{children:"homepage"}),"-Eintrag in der ",(0,t.jsx)(s.code,{children:"package.json"}),", ob eine ",(0,t.jsx)(s.code,{children:".nojekyll"}),"-Datei im Ausgabeverzeichnis liegt und dass ",(0,t.jsx)(s.code,{children:"index.html"})," direkt im Wurzelverzeichnis des ",(0,t.jsx)(s.code,{children:"gh-pages"}),"-Branches liegt.\nStelle sicher, dass keine zus\xe4tzliche Unterordner-Struktur (",(0,t.jsx)(s.code,{children:"/SmolDesk/"}),") im Branch vorhanden ist und die GitHub-Pages-Einstellungen auf den Branch ",(0,t.jsx)(s.code,{children:"gh-pages"})," mit dem Stammverzeichnis ",(0,t.jsx)(s.code,{children:"(root)"})," zeigen. Leere den Browser-Cache oder lade die Seite hart neu, falls eine veraltete 404-Seite gezeigt wird."]}),"\n",(0,t.jsx)(s.h3,{id:"fallback-vorschau-\xfcber-ci-artefakt",children:"Fallback-Vorschau \xfcber CI-Artefakt"}),"\n",(0,t.jsxs)(s.p,{children:["Falls GitHub Pages nicht erreichbar ist, stellt die CI den Inhalt von ",(0,t.jsx)(s.code,{children:"storybook-static/"})," als Download-Artefakt bereit. Der Workflow kommentiert im Pull Request einen Hinweis mit dem Link zur Action, damit Reviewer die Vorschau manuell laden k\xf6nnen."]}),"\n",(0,t.jsx)(s.h3,{id:"versionsanzeige-im-docs-tab",children:"Versionsanzeige im Docs-Tab"}),"\n",(0,t.jsxs)(s.p,{children:["Jeder Build setzt die Variablen ",(0,t.jsx)(s.code,{children:"VITE_VERSION"})," und ",(0,t.jsx)(s.code,{children:"VITE_COMMIT_SHA"}),". Die Vorschau zeigt diese Informationen oben im Docs-Tab an, z.B. ",(0,t.jsx)(s.code,{children:"Version: 1.0.0 (abcdef1)"}),". So l\xe4sst sich einfach \xfcberpr\xfcfen, welcher Commit gerade deployt ist."]})]})}function h(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>r,x:()=>c});var o=n(6540);const t={},i=o.createContext(t);function r(e){const s=o.useContext(i);return o.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),o.createElement(i.Provider,{value:s},e.children)}}}]);